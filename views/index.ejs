<!DOCTYPE html>
<html>
  <head>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link rel="stylesheet" href="/stylesheets/map.css"/>
    <link rel="stylesheet" href="/stylesheets/bootstrap.min.css" />
  </head>
  <body>

  <div class="navbar navbar-custom navbar-fixed-top">
    <div class="navbar-header"><a class="navbar-brand" href="#"><img alt="Brand" width="30px" height="30px" src="/images/png_icon_320.png"></a>
      <a class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="active"><a href="#">Home</a></li>
        <li><a href="#">Link</a></li>
        <li><a href="#">Link</a></li>
        <li>&nbsp;</li>
      </ul>
      <form class="navbar-form">
        <div class="form-group" style="display:inline;">
          <div class="input-group">
            <div class="input-group-btn">
              <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-chevron-down"></span></button>
              <ul class="dropdown-menu">
                <li><a href="#">茂名市</a></li>
                <li><a href="#">从化市</a></li>
              </ul>
            </div>
            <input type="text" class="form-control" placeholder="What are searching for?">
            <span class="input-group-addon"><span class="glyphicon glyphicon-search"></span> </span>
          </div>
        </div>
      </form>
    </div>
  </div>

  <div id="map-canvas"></div>

  <div class="container-fluid" id="main">
    <div class="row">
      <div class="col-xs-8" id="left">

        <h2>Bootstrap Google Maps Demo</h2>

        <!-- item list -->
        <div class="panel panel-default">
          <div class="panel-heading"><a href="">Item heading</a></div>
        </div>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis pharetra varius quam sit amet vulputate.
          Quisque mauris augue, molestie tincidunt condimentum vitae, gravida a libero. Aenean sit amet felis
          dolor, in sagittis nisi. Sed ac orci quis tortor imperdiet venenatis. Duis elementum auctor accumsan.
          Aliquam in felis sit amet augue.</p>

        <hr>

        <div class="panel panel-default">
          <div class="panel-heading"><a href="">Item heading</a></div>
        </div>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis pharetra varius quam sit amet vulputate.
          Quisque mauris augue, molestie tincidunt condimentum vitae, gravida a libero. Aenean sit amet felis
          dolor, in sagittis nisi. Sed ac orci quis tortor imperdiet venenatis. Duis elementum auctor accumsan.
          Aliquam in felis sit amet augue.</p>

        <hr>

        <div class="panel panel-default">
          <div class="panel-heading"><a href="">Item heading</a></div>
        </div>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis pharetra varius quam sit amet vulputate.
          Quisque mauris augue, molestie tincidunt condimentum vitae, gravida a libero. Aenean sit amet felis
          dolor, in sagittis nisi. Sed ac orci quis tortor imperdiet venenatis. Duis elementum auctor accumsan.
          Aliquam in felis sit amet augue.</p>

        <hr>

        <div class="panel panel-default">
          <div class="panel-heading"><a href="">Item heading</a></div>
        </div>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis pharetra varius quam sit amet vulputate.
          Quisque mauris augue, molestie tincidunt condimentum vitae, gravida a libero. Aenean sit amet felis
          dolor, in sagittis nisi. Sed ac orci quis tortor imperdiet venenatis. Duis elementum auctor accumsan.
          Aliquam in felis sit amet augue.</p>

        <hr>
        <!-- /item list -->

        <p>
          <a href="http://www.bootply.com/render/129229">Demo</a> | <a href="http://bootply.com/129229">Source Code</a>
        </p>

        <hr>

        <p>
          <a href="http://bootply.com" target="_ext" class="center-block btn btn-primary">More Bootstrap Snippets on Bootply</a>
        </p>

        <hr>

      </div>
      <div class="col-xs-4"><!--map-canvas will be postioned here--></div>

    </div>
  </div>




  <script src="http://webapi.amap.com/maps?v=1.3&key=b34c16903675b83b6a25dbd338d0608f&callback=init"></script>
  <script type="text/javascript" src="/javascripts/jquery-3.1.1.min.js"></script>
  <script type="text/javascript" src="/javascripts/bootstrap.min.js"></script>

  <script src="/javascripts/sites-400.js"></script>
  <script>

    var city_Maoming = [{
      "CityArea"           : "茂南",
      "lnBtsId"           : "817550",
      "lcrid"             : "131",
      "CellId"            : "817550131",
      "IP"                : "100.64.249.190",
      "BtsName_Cn"        : "茂南站前二路东(微小I)D-NLH",
      "CellName-Cn"       : "茂南站前二路东(微小I)D-NLH-131",
      "基站类型"          : "宏站",
      "站型"              : "室外",
      "Band"              : "D",
      "覆盖场景"          : "城区",
      "归属乡镇"          : "高山镇",
      "经度"              : "110.91237",
      "纬度"              : "21.64827",
      "天线挂高"          : "5",
      "Azimuth"           : "260",
      "电子下倾角"        : "0",
      "物理下倾角"         : "0",
      "当前基站软件版本"  : "TLF15A",
      "RRU类型"           : "FWHX_FRHX",
      "BBU类型"           : "FWHX",
      "BTSName"           : "MM-MaoNanZhanQianErLuDong(WeiXiaoI)D-NLH",
      "CellName"          : "MM-MaoNanZhanQianErLuDong(WeiXiaoI)D-NLH-131"
    },
      {
        "CityArea"           : "化州",
        "lnBtsId"           : "817552",
        "lcrid"             : "131",
        "CellId"            : "817552131",
        "IP"                : "100.98.176.125",
        "BtsName_Cn"        : "化州下郭车站(微小I)D-NLH",
        "CellName-Cn"       : "化州下郭车站(微小I)D-NLH-131",
        "基站类型"          : "宏站",
        "站型"              : "室外",
        "Band"              : "D",
        "覆盖场景"          : "城区",
        "归属乡镇"          : "下郭街办",
        "经度"              : "110.625417",
        "纬度"              : "21.648784",
        "天线挂高"          : "5",
        "Azimuth"           : "240",
        "电子下倾角"        : "0",
        "物理下倾角"        : "0",
        "当前基站软件版本"  : "TLF15A",
        "RRU类型"           : "FWHX_FRHX",
        "BBU类型"           : "FWHX",
        "BTSName"           : "MM-HuaZhouXiaGuoCheZhan(WeiXiaoI)D-NLH",
        "CellName"          : "MM-HuaZhouXiaGuoCheZhan(WeiXiaoI)D-NLH-131"
      },
      {
        "CityArea"           : "茂南",
        "lnBtsId"           : "817553",
        "lcrid"             : "131",
        "CellId"            : "817553131",
        "IP"                : "100.64.254.214",
        "BtsName_Cn"        : "茂南十中宿舍楼(微小M)D-NLH",
        "CellName-Cn"       : "茂南十中宿舍楼(微小M)D-NLH-131",
        "基站类型"          : "宏站",
        "站型"              : "室外",
        "Band"              : "D",
        "覆盖场景"          : "城区",
        "归属乡镇"          : "高山镇",
        "经度"              : "110.917739",
        "纬度"              : "21.688816",
        "天线挂高"          : "19",
        "Azimuth"           : "90",
        "电子下倾角"        : "0",
        "物理下倾角"        : "3",
        "当前基站软件版本"  : "TL15A",
        "RRU类型"           : "FZHS",
        "BBU类型"           : "FSIH",
        "BTSName"           : "MM-MaoNanShiZhongSuSheLou(WeiXiaoM)D-NLH",
        "CellName"          : "MM-MaoNanShiZhongSuSheLou(WeiXiaoM)D-NLH-131"
      }];

    var city_Conghua = [];
    function init(){
      var cluster, markers = [];

      var district, map = new AMap.Map('map-canvas', {
        center: [110.917739, 21.688816],
          resizeEnable: true,
        zoom: 10
      });

      map.setMapStyle("light");
      map.plugin(["AMap.ToolBar"], function() {
        map.addControl(new AMap.ToolBar());
      });

        addCity();
        function addCity() {
            //加载行政区划插件
            AMap.service('AMap.DistrictSearch', function () {
                var opts = {
                    subdistrict: 1,   //返回下一级行政区
                    extensions: 'all',  //返回行政区边界坐标组等具体信息
                    level: 'province'  //查询行政级别为 市
                };
                //实例化DistrictSearch
                district = new AMap.DistrictSearch(opts);
                district.setLevel('city');
                //行政区查询
                district.search("茂名市", function (status, result) {
                    var bounds = result.districtList[0].boundaries;
                    var polygons = [];
                    if (bounds) {
                        for (var i = 0, l = bounds.length; i < l; i++) {
                            //生成行政区划polygon
                            var polygon = new AMap.Polygon({
                                map: map,
                                strokeWeight: 1,
                                path: bounds[i],
                                fillOpacity: 0.1,
                                fillColor: '#f7f7f7',
                                strokeColor: '#CC66CC'
                            });
                            polygons.push(polygon);
                        }
                        map.setFitView();//地图自适应
                    }
                });
            });
        }

      var mapBounds = map.getBounds();
      var sw = mapBounds.getSouthWest();
      var ne = mapBounds.getNorthEast();
      var lngSpan = Math.abs(sw.lng - ne.lng);
      var latSpan = Math.abs(ne.lat - sw.lat);
      for (var i in sites400) {
        var markerPosition = [sites400[i].LON, sites400[i].LAT];
        var marker = new AMap.Marker({
          position: markerPosition,
          icon: "http://amappc.cn-hangzhou.oss-pub.aliyun-inc.com/lbs/static/img/marker.png",
          offset: {x: -8,y: -34}
        });
        markers.push(marker);
      }
      addCluster(0);

      function addCluster(tag) {
        if (cluster) {
          cluster.setMap(null);
        }
        if (tag == 1) {
          var sts = [{
            url: "http://a.amap.com/lbs/static/img/1102-1.png",
            size: new AMap.Size(32, 32),
            offset: new AMap.Pixel(-16, -30)
          }, {
            url: "http://a.amap.com/lbs/static/img/2.png",
            size: new AMap.Size(32, 32),
            offset: new AMap.Pixel(-16, -30)
          }, {
            url: "http://lbs.amap.com/wp-content/uploads/2014/06/3.png",
            size: new AMap.Size(48, 48),
            offset: new AMap.Pixel(-24, -45),
            textColor: '#CC0066'
          }];
          map.plugin(["AMap.MarkerClusterer"], function() {
            cluster = new AMap.MarkerClusterer(map, markers, {
              styles: sts
            });
          });
        } else {
          map.plugin(["AMap.MarkerClusterer"], function() {
            cluster = new AMap.MarkerClusterer(map, markers);
          });
        }
      }
    }
  </script>


  </body>
</html>
